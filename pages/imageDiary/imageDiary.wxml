<!--pages/imageDiary/imageDiary.wxml-->
<!-- 创建一个move-area -->

<view class='view-mainLayout'>

  <!--图片区  -->
  <view class='view-layoutFirst'>
    <image wx:if='{{showAddButton}}' src='/images/icon-imageDiary-addPhoto.svg' class='img-addphoto' catchtap="chooseImageTap"></image>
    <block wx:else>
      <image src='{{imgUrl}}' mode='aspectFit' class='img-uploaded' style='{{uploadedImageHeight <= uploadedImageWidth ? (uploadedImageHeight == uploadedImageWidth ? "width: " + uploadedImageWidth + "rpx; height: " +  uploadedImageHeight : "width: 100%; height : " + uploadedImageHeight) : "height: 95%; width: " + uploadedImageWidth}}rpx'></image>
      <movable-area class='movableArea-userInput' style='{{uploadedImageHeight <= uploadedImageWidth ? (uploadedImageHeight == uploadedImageWidth ? "width: " + uploadedImageWidth + "rpx; height: " +  uploadedImageHeight + "rpx; top: " + (1094 * 0.8 - uploadedImageHeight) / 2 + "rpx; left: " + (750 - uploadedImageWidth) / 2 : "width: 100%; height: " + uploadedImageHeight + "rpx; top: " + (1094 - uploadedHeight) / 2) : "height: " + 1094 * 0.95 * 0.8 + "rpx; width: " + uploadedImageWidth + "rpx; top: " + 1094 * 0.8 *(1 - 0.95) / 2 + "rpx; left: " + (750 - uploadedImageWidth) / 2}}rpx'>
        <movable-view style='display: flex;text-align: center;' wx:if='{{inputLength != 0}}' direction='all' inertia='true' scale='true'>{{inputValue}}</movable-view>
      </movable-area>
    </block>
    
  </view>
  <!--文本区  -->
  <view class='view-layoutSecond modify-shadow-main-up'>
    <!--分享按钮  -->
    <view>
      <image src="/images/icon-imageDiary-shareButton.svg" class='img-share' bindtap='powerDrawer' data-statu='open'></image>
    </view>
    <view class='view-layoutSecond-text'>
      <!--遮蔽层-->
      <view class="drawer-screen" bindtap="powerDrawer" data-statu="close" hidden="{{showModalStatus}}"></view>
      <!--content-->
      <!--使用animation属性指定需要执行的动画-->
      <view animation="{{animationData}}" class="drawer_box" hidden="{{showModalStatus}}">

        <!--drawer content-->
        <view class="drawer-content">
          <view class='view-model'>
            <text>叙事模式</text>
            <switch class='switch-input' checked='{{switchChecked}}' bindchange='switchModel' disabled='{{switchDisabled}}' color='#3f8ae9'></switch>
          </view>
          <view class='view-eachItem' style='margin-top:20px'>
            <text class="text-eachTitle">文案</text>
            <textarea class='input-text' auto-height='true' bindfocus='textareaOnFocusEvent' bindinput='textareaOnInputEvent' bindblur="textareaOnBlurEvent" placeholder='请在这里输入文案。' maxlength='{{inputMaxLength}}' placeholder-style='font-size: 13pt' show-confirm-bar='false'></textarea>
            <view class='view-line'></view>
            <view class='view-help-and-displayLength'>
              <image class='img-helpLogo' src='/images/icon-imageDiary-help.svg'></image>
              <text class='text-displayLength'>{{inputLength}}/{{inputMaxLength}}</text>
            </view>
          </view>

          <view class='view-eachItem view-dictum' hidden='{{inputLength != 0}}'>
            <text class='text-eachTitle'>名言</text>
            <view class='view-select-layout'>
              <view class='view-select-box-first'>
                <view class='view-select' id='dictumFirst' catchtap='selectDictum'>
                  <text class='text-select'>{{dataDictumFirst[indexDictumFirst]}}</text>
                </view>
                <view class='view-option-box-first' style='height:{{showDictumFirst?(dataDictumFirst.length>5?300:dataDictumFirst.length*60):0}}rpx;'>
                  <text class='text-option-box' style='{{indexDictumFirst==dataDictumFirst.length-1&&"border:0;"}}' wx:for='{{dataDictumFirst}}' wx:key='this' data-index='{{index}}' id='selectDictumFirst' catchtap='optionDictum'>{{item}}</text>
                </view>
              </view>
              <view class='view-select-box-first'>
                <view class='view-select' id='dictumSecond' catchtap='selectDictum'>
                  <text class='text-select'>{{dataDictumSecond[indexDictumSecond]}}</text>
                </view>
                <view class='view-option-box-first' style='height:{{showDictumSecond?(dataDictumSecond.length>5?300:dataDictumSecond.length*60):0}}rpx;'>
                  <text class='text-option-box' style='{{indexDictumSecond==dataDictumSecond.length-1&&"border:0;"}}' wx:for='{{dataDictumSecond}}' wx:key='this' data-index='{{index}}' id='selectDictumSecond' catchtap='optionDictum'>{{item}}</text>
                </view>
              </view>
              <view class='view-select-box-first'>
                <view class='view-select' id='dictumThird' catchtap='selectDictum'>
                  <text class='text-select' style='font-size:9pt'>{{dataDictumThird[indexDictumThird]}}</text>
                </view>
                <view class='view-option-box-first view-option-box-second' style='height:{{showDictumThird?(dataDictumThird.length>5?300:dataDictumThird.length*60):0}}rpx;'>
                  <text class='text-option-box' style='{{indexDictumThird==dataDictumThird.length-1&&"border:0;"}}' wx:for='{{dataDictumThird}}' wx:key='this' data-index='{{index}}' id='selectDictumThird' catchtap='optionDictum'>{{item}}</text>
                </view>
              </view>
            </view>
          </view>

        </view>
        <view class="btn_ok" bindtap="powerDrawer" data-statu="close">确定</view>
      </view>

      <!-- 显示输入的文字 -->
      <view class='view-eachItem' style='margin-top:10px; '>
        <text class="text-eachTitle" bindtap="powerDrawer" data-statu="open" style='{{inputLength == 0 ? "color: grey; font-size: 13pt;" : ""}};'>文案</text>
        <view class='view-show-text' bindtap="powerDrawer" data-statu="open">{{inputValue}}</view>
        <view class='view-line' bindtap="powerDrawer" data-statu="open" style='{{inputLength == 0 ? "background-color: grey;" : "height: 4rpx"}};'></view>
      </view>

      <!--显示样式  -->
      <view class='view-eachItem view-style'  style='margin-top: 5%;'>
        <text class='text-eachTitle'>样式</text>
        <view style='margin-top: 0%;'>
          <slider show-value min='1' max='18' activeColor='#3f8ae9' block-size='20'></slider>
        </view>
      </view>

      <!--天气、时空和心情滤镜  -->
      <view class='view-eachItem' style='margin-top: 8%;' >
        <checkbox-group class='checkgroup-threeItems' style='z-index:{{zIndex}}' bindchange="checkboxChange">
          <label wx:key="this" wx:for="{{items}}">
            <checkbox value="{{item}}" checked="{{item.checked}}" />{{item.value}}
          </label>
        </checkbox-group>
      </view>
    </view>
  </view>
</view>